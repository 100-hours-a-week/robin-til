# Maven

<aside>
ğŸ’¡ Mavenì€ Apache ì¬ë‹¨ì—ì„œ ê°œë°œí•˜ëŠ” JAVA ê¸°ë°˜ í”„ë¡œì íŠ¸ì˜ ë¼ì´í”„ì‚¬ì´í´ ê´€ë¦¬ë¥¼ ìœ„í•œ ë¹Œë“œ ë„êµ¬

</aside>

- ì»´íŒŒì¼, ë¹Œë“œ ë“±ì„ ë™ì‹œì— ìˆ˜í–‰
- í…ŒìŠ¤íŠ¸ ë³‘í–‰
- ì„œë²„ ì¸¡ Deploy ìì›ì„ ê´€ë¦¬í•  ìˆ˜ ìˆëŠ” í™˜ê²½ì„ ì œê³µ
- ë¼ì´ë¸ŒëŸ¬ë¦¬ ê´€ë¦¬ ê¸°ëŠ¥ ë‚´í¬

`settings.xml`ì´ë‚˜ `pom.xml` íŒŒì¼ì— í”„ë¡œì íŠ¸ì— í•„ìš”í•œ ë¼ì´ë¸ŒëŸ¬ë¦¬ ë° ë²„ì ¼ì„ ì ìœ¼ë©´ Mavenì´ ì•Œì•„ì„œ ë‹¤ìš´ë°›ê³ , ì„¤ì¹˜í•´ì£¼ê³ , ê²½ë¡œê¹Œì§€ ì§€ì •í•´ì¤€ë‹¤.

**maven í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°**

**application-core**

- `pom.xml`
- src
    - main
        - java
            - com.package.dir
        - resources
    - test
        - java
            - com.package.dir
        - resources
        

## maven Repository ì¢…ë¥˜

<aside>
ğŸ’¡ í”„ë¡œì íŠ¸ë¥¼ ë¹Œë“œí•˜ê±°ë‚˜ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë‹¤ìš´ë¡œë“œí•  ë•Œ ì˜ì¡´ì„±ì„ í™•ì¸í•˜ê¸° ìœ„í•´ repositoryë¥¼ ì‚¬ìš©í•˜ëŠ”ë° ì´ ë•Œ repositoryì—ëŠ” 3ì¢…ë¥˜ê°€ ìˆë‹¤.

</aside>

### local Repository

- mavenì€ dependency(ì˜ì¡´ì„±) ë° packagingí•œ í”„ë¡œì íŠ¸ ê²°ê³¼ë¬¼ì„ localì˜ íŠ¹ì • ìœ„ì¹˜ì— ì €ì¥í•œë‹¤.
- ë¦¬ëˆ…ìŠ¤&MACì˜ ê¸°ë³¸ìœ„ì¹˜
    - <í™ˆ ë””ë ‰í† ë¦¬>/.m2

### Repository

- ì˜ì¡´ì„±ì„ ë‹¤ìš´ë¡œë“œ ë°›ëŠ” ìœ„ì¹˜ì˜ repository
- `settings.xml` ì´ë‚˜ `pom.xml` ì— ê¸°ìˆ ëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ ë‹¤ìš´ ë°›ëŠ” ì €ì¥ì†Œ
- ê¸°ë³¸ ìœ„ì¹˜
    
    http://repo.maven.apache.org/maven2
    

### Plugin Repository

- maven pluginì„ ë‹¤ìš´ë¡œë“œ ë°›ì„ ìˆ˜ ìˆëŠ” ì €ì¥ì†Œì˜ ìœ„ì¹˜

# ì‹œì—°

ê¸°ë³¸ì ìœ¼ë¡œ Gradleì€ Maven Centralê³¼ ê°™ì€ Maven Repositoryì—ì„œ ì˜ì¡´ì„±ì„ ê°€ì ¸ì˜¤ë„ë¡ ì„¤ì •ë˜ì–´ ìˆë‹¤.

build.graldeì—ì„œ ì´ë¯¸ maven Repositoryë¥¼ í†µí•´ ì˜ì¡´ì„± ê´€ë¦¬ë¥¼ í•˜ê³  ìˆë‹¤.

```java
repositories {
    mavenCentral()
    maven {
        url = uri("https://maven.pkg.github.com/liebigbear/ghcr-library-pjt")
        credentials {
            username = project.findProperty("gpr.user") ?: System.getenv("GITHUB_USERNAME")
            password = project.findProperty("gpr.token") ?: System.getenv("GITHUB_TOKEN")
        }
    }
}
```

mavenCentral() : Maven Central Repository ì‚¬ìš©

gradleí”„ë¡œì íŠ¸ë¥¼ mavení”„ë¡œì íŠ¸ë¡œ ìˆ˜ì •

pom.xml

```java
<project xmlns="http://maven.apache.org/POM/4.0.0"
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <groupId>org.ej31</groupId>
    <artifactId>myproject</artifactId>
    <version>1.0-SNAPSHOT</version>
    <packaging>jar</packaging>

    <properties>
        <maven.compiler.source>21</maven.compiler.source>
        <maven.compiler.target>21</maven.compiler.target>
    </properties>

    <repositories>
        <repository>
            <id>github-liebigbear</id>
            <url>https://maven.pkg.github.com/liebigbear/ghcr-library-pjt</url>
        </repository>
    </repositories>

    <dependencies>
        <dependency>
            <groupId>org.ej31</groupId>
            <artifactId>ghcr-library-pjt</artifactId>
            <version>1.0-SNAPSHOT</version>
        </dependency>
        <dependency>
            <groupId>org.junit.jupiter</groupId>
            <artifactId>junit-jupiter-api</artifactId>
            <version>5.10.0</version>
            <scope>test</scope>
        </dependency>
        <dependency>
            <groupId>org.junit.jupiter</groupId>
            <artifactId>junit-jupiter-engine</artifactId>
            <version>5.10.0</version>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.8.1</version>
                <configuration>
                    <source>21</source>
                    <target>21</target>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>exec-maven-plugin</artifactId>
                <version>1.6.0</version>
                <executions>
                    <execution>
                        <goals>
                            <goal>java</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <mainClass>your.main.Class</mainClass>
                </configuration>
            </plugin>
        </plugins>
    </build>
</project>
```

í™ˆë””ë ‰í† ë¦¬ m2ì— settings.xml íŒŒì¼ ìƒì„±

m2ë””ë ‰í† ë¦¬ í™•ì¸

```java
ls -al ~/.m2
```

~/.m2/settings.xml ë³µì‚¬

```java
<settings>
    <servers>
        <server>
            <id>github-liebigbear</id>
            <username>${env.GITHUB_USERNAME}</username>
            <password>${env.GITHUB_TOKEN}</password>
        </server>
    </servers>
</settings>

```

í™˜ê²½ë³€ìˆ˜ ì„¤ì •

/.zshrc ë‚´ìš©ì„ ì¶”ê°€í•˜ë©´ ì˜êµ¬ì ìœ¼ë¡œ í™˜ê²½ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•  ìˆ˜ ìˆìœ¼ë‚˜

```java
echo 'export GITHUB_USERNAME=liebigbear' >> ~/.zshrc
echo 'export GITHUB_TOKEN=ghc2313wfwegwgewgwe' >> ~/.zshrc
source ~/.zshrc
```

í™˜ê²½ë³€ìˆ˜ë¥¼ ì½ì–´ì˜¤ì§€ ëª»í•´ì„œ

í„°ë¯¸ë„ì—ì„œ exportë¡œ ì‚¬ìš©

```java
export GITHUB_USERNAME=liebigbear
export GITHUB_TOKEN=ghr321352352p5j23p
```

ì‹¤í–‰

```java
mvn clean install
```

---

# Maven Multi Repository

<aside>
ğŸ’¡ Maven í”„ë¡œì íŠ¸ê°€ ì—¬ëŸ¬ ë¦¬í¬ì§€í† ë¦¬ì—ì„œ ì˜ì¡´ì„±ì„ ê²€ìƒ‰í•˜ê³  ë‹¤ìš´ë¡œë“œí•  ìˆ˜ ìˆë„ë¡ êµ¬ì„±í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤.

</aside>

pom.xmlì— ë¦¬í¬ì§€í† ë¦¬ ì¶”ê°€

```java
<repositories>
        <repository>
            <id>github-liebigbear</id>
            <url>https://maven.pkg.github.com/liebigbear/ghcr-library-pjt</url>
        </repository>
        <repository>
            <id>github-liebigbear-multi</id>
            <url>https://maven.pkg.github.com/liebigbear/ghcr-library-pjt-maven</url>
        </repository>
    </repositories>

```

ì˜ì¡´ì„±

```java
<dependency>
            <groupId>org.ej31</groupId>
            <artifactId>ghcr-library-pjt</artifactId>
            <version>1.0-SNAPSHOT</version>
        </dependency>
        <!-- ë‘ ë²ˆì§¸ ë¦¬í¬ì§€í† ë¦¬ì—ì„œì˜ ì˜ì¡´ì„± -->
        <dependency>
            <groupId>org.ej31</groupId>
            <artifactId>ghcr-library-pjt-maven</artifactId>
            <version>1.0-SNAPSHOT</version>
        </dependency>
```

```java
<settings>
    <servers>
        <server>
            <id>github-liebigbear</id>
            <username>${env.GITHUB_USERNAME}</username>
            <password>${env.GITHUB_TOKEN}</password>
        </server>
        <server>
            <id>github-liebigbear-multi</id>
            <username>${env.GITHUB_USERNAME}</username>
            <password>${env.GITHUB_TOKEN}</password>
        </server>
    </servers>
</settings>
```

---

[Maven Repository](https://velog.io/@yardyard/Maven-Repository)
